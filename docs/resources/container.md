---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "tg_container Resource - terraform-provider-tg"
subcategory: ""
description: |-
  Manage a node or cluster container
---

# tg_container (Resource)

Manage a node or cluster container

## Example Usage

```terraform
resource "tg_container" "alpine" {
  node_id     = "35ee5516-c6d5-409b-b1ba-6aa2d0dd92fcf"
  command     = "ls -lR"
  name        = "alpine-lister"
  description = "my alpine container"
  enabled     = true
  exec_type   = "onDemand"

  image {
    repository = "dev.trustgrid.io/alpine"
    tag        = "latest"
  }

  variables = {
    "foo" = "bar"
  }

  add_caps  = ["NET_ADMIN"]
  drop_caps = ["MKNOD"]

  log_max_file_size = 100
  log_max_num_files = 101

  healthcheck {
    command      = "stat /tmp/healthy"
    interval     = 10
    retries      = 3
    start_period = 10
    timeout      = 10
  }

  limits {
    cpu_max  = 25
    io_rbps  = 15
    io_riops = 11
    io_wbps  = 16
    mem_high = 25
    mem_max  = 45
    limits {
      type = "nice"
      soft = 10
      hard = 5
    }
  }

  mount {
    type   = "volume"
    source = resource.tg_container_volume.myvol.name
    dest   = "/mnt/myvol"
  }

  port_mapping {
    protocol       = "tcp"
    container_port = 80
    host_port      = 8080
    iface          = "ens160"
  }

  virtual_network {
    network = "my-vnet"
    ip      = "1.1.1.1"
  }

  interface {
    name = "eth0"
    dest = "10.10.14.0/255"
  }

  vrf = "default"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `exec_type` (String) Container execution type - one of "onDemand", "service", or "recurring"
- `image` (Block List, Min: 1, Max: 1) (see [below for nested schema](#nestedblock--image))
- `name` (String) Container Name

### Optional

- `add_caps` (List of String) Add Linux capabilities from the container to have fine grain control over kernel features and device access
- `cluster_fqdn` (String) Cluster FQDN
- `command` (String) Command
- `description` (String) Description
- `drop_caps` (List of String) Drop Linux capabilities from the container to have fine grain control over kernel features and device access
- `enabled` (Boolean) Enabled
- `healthcheck` (Block List, Max: 1) (see [below for nested schema](#nestedblock--healthcheck))
- `hostname` (String) Host name
- `interface` (Block List) (see [below for nested schema](#nestedblock--interface))
- `limits` (Block List, Max: 1) (see [below for nested schema](#nestedblock--limits))
- `log_max_file_size` (Number) Maximum log file size (MB)
- `log_max_num_files` (Number) Maximum log files to keep
- `mount` (Block List) (see [below for nested schema](#nestedblock--mount))
- `node_id` (String) Node ID
- `port_mapping` (Block List) (see [below for nested schema](#nestedblock--port_mapping))
- `privileged` (Boolean) Grant extended privileges to the container
- `require_connectivity` (Boolean) Ensures that a container that has encrypted volumes won't start unless the node has connectivity to the control plane
- `stop_time` (Number) Time to wait, in seconds, for container to stop gracefully
- `use_init` (Boolean) Indicates that an init process should be used as PID 1 in the container. Ensures responsibilities of an init system are performed inside the container (i.e., handling exit signals)
- `user` (String) User
- `variables` (Map of String) Environment variables
- `virtual_network` (Block List) (see [below for nested schema](#nestedblock--virtual_network))
- `vrf` (String) Container VRF

### Read-Only

- `id` (String) Container ID

<a id="nestedblock--image"></a>
### Nested Schema for `image`

Required:

- `repository` (String) Image repository
- `tag` (String) Image tag


<a id="nestedblock--healthcheck"></a>
### Nested Schema for `healthcheck`

Required:

- `command` (String) Command
- `interval` (Number) Interval
- `retries` (Number) Number of health checks that must fail before a container is considered unhealthy
- `start_period` (Number) Grace period before health checks are monitored, in seconds
- `timeout` (Number) Timeout


<a id="nestedblock--interface"></a>
### Nested Schema for `interface`

Required:

- `dest` (String) Internal interface destination
- `name` (String) Virtual interface name

Read-Only:

- `uid` (String) Interface ID (for API use only)


<a id="nestedblock--limits"></a>
### Nested Schema for `limits`

Required:

- `cpu_max` (Number) CPU max allocation %
- `mem_high` (Number) Soft RAM allocation limit (MB)
- `mem_max` (Number) Hard RAM allocation limit (MB)

Optional:

- `io_rbps` (Number) Max allowed read throughput (bytes per second)
- `io_riops` (Number) Max allowed read throughput (IOPS)
- `io_wbps` (Number) Max allowed write throughput (bytes per second)
- `io_wiops` (Number) Max allowed write throughput (IOPS)
- `limits` (Block List) Linux kernel limits (see [below for nested schema](#nestedblock--limits--limits))

<a id="nestedblock--limits--limits"></a>
### Nested Schema for `limits.limits`

Required:

- `hard` (Number) Hard limit
- `soft` (Number) Soft limit
- `type` (String) Limit type



<a id="nestedblock--mount"></a>
### Nested Schema for `mount`

Required:

- `dest` (String) Destination path in the container filesystem
- `source` (String) For `volume` mounts, the name of the volume. For `bind` mounts, the path to the file or directory on the host datastore
- `type` (String) Mount type - `volume` or `bind`

Read-Only:

- `uid` (String) Mount ID (for API use only)


<a id="nestedblock--port_mapping"></a>
### Nested Schema for `port_mapping`

Required:

- `container_port` (Number) Container port
- `host_port` (Number) Host port
- `iface` (String) Host interface to expose port
- `protocol` (String) Protocol - `tcp` or `udp`

Read-Only:

- `uid` (String) Port Mapping ID (for API use only)


<a id="nestedblock--virtual_network"></a>
### Nested Schema for `virtual_network`

Required:

- `ip` (String) Virtual IP address
- `network` (String) Virtual network name to attach

Optional:

- `allow_outbound` (Boolean) Allow outbound connections on this network

Read-Only:

- `uid` (String) VNet ID (for API use only)


